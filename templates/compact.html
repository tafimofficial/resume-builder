<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ resume.personal_detail.full_name }} | {{ resume.get_doc_type_display }}</title>
    <style>
        body { font-family: 'Arial Narrow', Arial, sans-serif; background: #fff; margin: 0; padding: 40px 0; color: #333; }
        .resume-container { width: 210mm; min-height: 297mm; margin: 0 auto; padding: 40px; box-sizing: border-box; background: white; border: 1px solid #eee; }
        
        .header { display: flex; justify-content: space-between; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 15px; }
        .name { font-size: 24px; font-weight: bold; text-transform: uppercase; }
        .contact { text-align: right; font-size: 11px; line-height: 1.4; }
        
        .columns { display: grid; grid-template-columns: 2fr 1fr; gap: 25px; }
        
        h2 { font-size: 14px; text-transform: uppercase; background: #eee; padding: 3px 5px; margin: 0 0 10px 0; font-weight: bold; }
        
        .entry { margin-bottom: 10px; break-inside: avoid; }
        .entry-header { display: flex; justify-content: space-between; font-weight: bold; font-size: 12px; margin-bottom: 2px; }
        .entry-sub { font-style: italic; font-size: 11px; margin-bottom: 2px; }
        .entry-desc { font-size: 11px; line-height: 1.3; text-align: justify; }
        .entry-desc ul { margin: 2px 0 2px 15px; padding: 0; }
        
        .skill-list { font-size: 11px; display: flex; flex-wrap: wrap; gap: 4px; }
        .skill-item { background: #f5f5f5; padding: 2px 5px; border-radius: 2px; }

        @media print {
            body { padding: 0; }
            .resume-container { width: 100%; border: none; margin: 0; padding: 30px; }
        }
    </style>
</head>
<body>

<div class="resume-container">
    <div class="header">
        <div class="name">{{ resume.personal_detail.full_name }}</div>
        <div class="contact">
            {{ resume.personal_detail.email }}<br>
            {{ resume.personal_detail.phone }}<br>
            {{ resume.personal_detail.address }}<br>
            {% if resume.personal_detail.linkedin_url %} <a href="{{ resume.personal_detail.linkedin_url }}">LinkedIn</a> {% endif %}
             {% if resume.personal_detail.portfolio_url %} | <a href="{{ resume.personal_detail.portfolio_url }}">Portfolio</a>{% endif %}
        </div>
    </div>

    {% if resume.personal_detail.summary %}
    <div style="font-size: 11px; margin-bottom: 15px; text-align: justify;">
        {{ resume.personal_detail.summary }}
    </div>
    {% endif %}

    <div class="columns">
        <div class="left-col">
            <h2>Experience</h2>
            {% for exp in resume.experience.all %}
            <div class="entry">
                <div class="entry-header">
                    <span>{{ exp.position }}</span>
                    <span>{{ exp.start_date|date:"M Y" }} - {% if exp.is_current %}Present{% else %}{{ exp.end_date|date:"M Y" }}{% endif %}</span>
                </div>
                <div class="entry-sub">{{ exp.company }}</div>
                <div class="entry-desc">{{ exp.description|linebreaksbr }}</div>
            </div>
            {% endfor %}

            {% if resume.research.all %}
            <h2>Research</h2>
            {% for res in resume.research.all %}
            <div class="entry">
                <div class="entry-header">
                    <span>{{ res.title }}</span>
                    <span>{{ res.date|date:"Y" }}</span>
                </div>
                <div class="entry-desc">{{ res.description|linebreaksbr }}</div>
            </div>
            {% endfor %}
            {% endif %}
            
            {% if resume.publications.all %}
            <h2>Publications</h2>
            {% for pub in resume.publications.all %}
            <div class="entry">
                <div class="entry-header">
                    <span>{{ pub.title }}</span>
                    <span>{{ pub.date|date:"Y" }}</span>
                </div>
                <div class="entry-sub">{{ pub.publisher }}</div>
            </div>
            {% endfor %}
            {% endif %}
        </div>
        
        <div class="right-col">
             <h2>Education</h2>
            {% for edu in resume.education.all %}
            <div class="entry">
                <div class="entry-header">
                    <span>{{ edu.institution }}</span>
                </div>
                <div class="entry-sub" style="display: flex; justify-content: space-between;">
                    <span>{{ edu.degree }}</span>
                    <span>{{ edu.end_date|date:"Y" }}</span>
                </div>
            </div>
            {% endfor %}

            <h2>Skills</h2>
            <div class="skill-list">
                {% for skill in resume.skills.all %}
                <span class="skill-item">{{ skill.name }}</span>
                {% endfor %}
            </div>

            {% if resume.awards.all %}
            <h2 style="margin-top: 15px;">Awards</h2>
            {% for award in resume.awards.all %}
            <div class="entry">
                <div class="entry-header">
                    <span>{{ award.title }}</span>
                    <span>{{ award.date|date:"Y" }}</span>
                </div>
                <div class="entry-sub">{{ award.issuer }}</div>
            </div>
            {% endfor %}
            {% endif %}
        </div>
    </div>
</div>

</body>
</html>
